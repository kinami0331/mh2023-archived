(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8809],{97352:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M793.8 499.3L506.4 273.5c-10.7-8.4-26.4-.8-26.4 12.7v451.6c0 13.5 15.7 21.1 26.4 12.7l287.4-225.8a16.14 16.14 0 000-25.4zm-320 0L186.4 273.5c-10.7-8.4-26.4-.8-26.4 12.7v451.5c0 13.5 15.7 21.1 26.4 12.7l287.4-225.8c4.1-3.2 6.2-8 6.2-12.7 0-4.6-2.1-9.4-6.2-12.6zM857.6 248h-51.2c-3.5 0-6.4 2.7-6.4 6v516c0 3.3 2.9 6 6.4 6h51.2c3.5 0 6.4-2.7 6.4-6V254c0-3.3-2.9-6-6.4-6z"}}]},name:"fast-forward",theme:"outlined"}},5485:function(e,t,n){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return c}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(2265)),a=o(n(97352)),s=o(n(51718));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var c=r.forwardRef(function(e,t){var n,o;return r.createElement(s.default,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),o=o={ref:t,icon:a.default},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n))})},85847:function(e,t,n){"use strict";n.d(t,{e:function(){return b},t:function(){return M}});var r=n(24670),a=n(57437),s=n(5485),o=n(61954),i=n(52955),c=n(26782),u=n(82044),l=n(43194),f=n(2265),d=n(38266),h=n.n(d),g=n(37856);function v(e){var t=e.imageUrl;return(0,a.jsx)("div",{className:h().chatMessageAvatar,style:{backgroundImage:"url(".concat(t,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat"}})}var m="images/chatmiao_avatar.webp";function _(e){var t=e.text;return(0,a.jsxs)("div",{className:h().chatBotMessageContainer,children:[(0,a.jsx)("div",{className:h().chatMessageAvatarContainer,children:(0,a.jsx)(v,{imageUrl:m})}),(0,a.jsx)("div",{className:h().chatBotMessageText,children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:t.content}})})]})}function j(e){var t=e.text;return(0,a.jsxs)("div",{className:h().chatBotMessageContainer,children:[(0,a.jsx)("div",{className:h().chatMessageAvatarContainer,children:(0,a.jsx)(v,{imageUrl:m})}),(0,a.jsx)("div",{className:h().chatBotMessageImageContainer,children:(0,a.jsx)(i.Z,{src:t.content.substring(4),className:h().chatBotMessageImage,alt:""})})]})}function x(e){var t=e.node;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:h().chatBotMessageContainer,children:[(0,a.jsx)("div",{className:h().chatMessageAvatarContainer,children:(0,a.jsx)(v,{imageUrl:m})}),(0,a.jsx)("div",{className:h().chatBotMessageText,children:t})]})})}function p(e){var t,n=e.text,r=(0,l.ei)();return t=r.user?(0,a.jsx)(v,{imageUrl:r.user.profile.avatar_url}):(0,a.jsx)(c.default.Avatar,{className:h().chatMessageAvatar}),(0,a.jsxs)("div",{className:h().chatUserMessageContainer,children:[(0,a.jsx)("div",{className:h().chatUserMessageText,children:n.content}),(0,a.jsx)("div",{className:h().chatMessageAvatarContainer,children:t})]})}function y(){return(0,a.jsx)("div",{className:h().chatProceedMessageContainer,children:(0,a.jsx)("div",{style:{color:"#666",fontStyle:"italic"},children:"点击屏幕继续，点击右上角快进"})})}function C(e){var t=e.chatMessages,n=e.actionButton,i=e.onClick,c=e.onFastForward,l=e.canProceed,d=t.map(function(e,t){return e.isBot?e.content.startsWith("img:")?(0,a.jsx)(j,{text:e},"chat-message-".concat(t)):"actionButton"===e.content&&n?(0,a.jsx)(x,{node:n},"chat-message-action"):(0,a.jsx)(_,{text:e},"chat-message-".concat(t)):(0,a.jsx)(p,{text:e},"chat-message-".concat(t))}),v=(0,r._)((0,f.useState)(""),2),m=v[0],C=v[1];return(0,f.useEffect)(function(){var e=setInterval(function(){var e=new Date,t="".concat(e.getHours(),":").concat(e.getMinutes());m!==t&&C(t)},1e3);return function(){clearInterval(e)}}),(0,a.jsxs)("div",{className:h().dialogueContainer,onClick:i,children:[(0,a.jsxs)("div",{className:h().phoneHeader,children:[(0,a.jsxs)("div",{className:h().oneInThirdSection,style:{justifyContent:"flex-start"},children:[(0,a.jsx)(g.y7,{}),(0,a.jsxs)("span",{children:[" MiaoMobile ",(0,a.jsx)("strong",{children:"6G"})]})]}),(0,a.jsx)("div",{className:h().oneInThirdSection,style:{justifyContent:"center"},children:m}),(0,a.jsxs)("div",{className:h().oneInThirdSection,style:{justifyContent:"flex-end"},children:[(0,a.jsx)(g.C1,{}),(0,a.jsx)("span",{children:" 100%"})]})]}),(0,a.jsxs)("div",{className:h().chatHeader,children:[(0,a.jsx)("div",{className:h().oneInThirdSection,style:{justifyContent:"flex-start"},children:(0,a.jsx)(o.default,{})}),(0,a.jsx)("div",{className:h().oneInThirdSection,style:{justifyContent:"center"},children:(0,a.jsx)("span",{children:"ChatMiao"})}),(0,a.jsx)("div",{className:h().oneInThirdSection,style:{justifyContent:"flex-end"},children:(0,a.jsx)("span",{onClick:c,style:{cursor:"pointer"},children:(0,a.jsx)(u.default,{title:"快进到对话结束",children:(0,a.jsx)(s.Z,{style:{fontSize:"1.5em"}})})})})]}),(0,a.jsx)("div",{className:h().chatContainer,children:d}),l&&(0,a.jsx)(y,{})]})}function M(e){var t=e.chatMessages,n=e.showAllByDefault,s=e.actionButton,o=(0,r._)((0,f.useState)(1),2),i=o[0],c=o[1];(0,f.useEffect)(function(){i>1&&i<=t.length&&!n&&window.scrollTo(0,document.body.scrollHeight),n&&c(t.length)},[t.length,i,n]);var u=(0,a.jsx)(C,{chatMessages:t.slice(0,i),actionButton:s,onClick:function(){c(function(e){return Math.min(e+1,t.length)})},onFastForward:function(){c(t.length)},canProceed:i<t.length});return{finish:i>=t.length,chatComponent:u}}function b(e){return M({chatMessages:e.chatMessages,showAllByDefault:e.showAllByDefault,actionButton:e.actionButton}).chatComponent}},32627:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(57437);n(2265);var a=n(86799),s=n.n(a),o=n(31731);function i(e){var t=e.icon,n=e.title,a=e.url;return(0,r.jsx)("div",{className:s().linkTitle,children:(0,r.jsx)(o.g,{href:a,targetType:"link-title",children:(0,r.jsxs)("div",{children:[t," ",n]})})})}},31731:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(35029),a=n(57437),s=n(2265),o=n(84987),i=n(24033),c=n(61396),u=n.n(c);function l(e){var t=e.children,n=e.href,c=e.targetType,l=e.onClick,f=e.className,d=e.style,h=e.disabled,g=void 0!==h&&h,v=(0,s.useContext)(o.Q).useLinkForPuzzle,m=(0,i.useRouter)(),_=!1,j=!1;return(v&&"puzzle"===c&&(_=!0),("header-menu"===c||"menu"==c)&&(j=!0),j)?t:_?(0,a.jsx)(u(),{className:null!=f?f:"",href:n,style:(0,r._)({textDecoration:"none",color:"inherit",cursor:"pointer"},d),onClick:function(e){if(g){e.preventDefault();return}e.stopPropagation(),l&&!g&&l()},children:t}):(0,a.jsx)("div",{className:null!=f?f:"",onClick:function(e){e.stopPropagation(),!g&&(m.push(n),l&&l())},style:(0,r._)({cursor:"pointer",display:"inline"},d),onMouseDown:function(e){e.preventDefault(),1===e.button&&window.open(n,"_blank")},children:t})}},36064:function(e,t,n){"use strict";n.d(t,{Gv:function(){return C},Bk:function(){return x},I$:function(){return y},BZ:function(){return p}});var r=n(35029),a=n(24670),s=n(57437),o=n(88110),i=n.n(o),c=n(52955),u=n(43574),l=n(26782),f=n(20273);function d(e){var t=e.message,n=e.reload;return(0,s.jsx)(f.Z,{type:"error",showIcon:!0,message:t,action:(0,s.jsx)(i(),{onClick:n,children:"重试"})})}var h=n(89376),g=n.n(h),v=n(42333),m=n(67912),_=n(2265),j=n(34040);function x(e){var t=e.name,n=e.children;return(0,s.jsx)("div",{className:"template-".concat(t," ")+g().template,dangerouslySetInnerHTML:{__html:n}})}function p(e){var t=e.name,n=e.children,a=(0,_.useRef)(null);return(0,_.useEffect)(function(){if(a.current){for(;a.current.firstChild;)a.current.removeChild(a.current.firstChild);var e=document.createElement("div");e.className="template-".concat(t," ")+g().template,e.innerHTML=n,Array.from(e.getElementsByClassName("template-antd-image")).forEach(function(e){var t=e.getAttribute("data-src");t&&(0,j.createRoot)(e).render((0,s.jsx)(c.Z,{src:t,alt:"image"}))}),Array.from(e.getElementsByClassName("template-antd-button")).forEach(function(e){var t=e.textContent,n=(0,j.createRoot)(e),r="button";"submit"==e.getAttribute("type")&&(r="submit");var a=e.getAttribute("data-href")||void 0;n.render((0,s.jsx)(i(),{type:"default",size:"large",href:a,htmlType:r,children:t}))}),Array.from(e.getElementsByClassName("template-antd-input")).forEach(function(e){var t=(0,j.createRoot)(e),n=JSON.parse(e.getAttribute("data-attr")||"{}");t.render((0,s.jsx)(u.default,(0,r._)({},n)))}),a.current.appendChild(e);var o=setTimeout(function(){Array.from(e.getElementsByTagName("script")).forEach(function(e){var t=e.innerHTML;window.eval(t)})},200);return function(){return clearTimeout(o)}}},[n,t]),(0,s.jsx)("div",{ref:a})}function y(e){var t=e.name,n=(0,v.ZP)([t],function(e){var t=(0,a._)(e,1)[0];return(0,m.Ym)(t)}),r=n.data,o=n.error,i=n.mutate;return o?(0,s.jsx)(d,{message:o.message,reload:i}):r?(0,s.jsx)(p,{name:t,children:r}):(0,s.jsx)(l.default,{})}function C(e){var t=e.name,n=(0,v.ZP)([t],function(e){var t=(0,a._)(e,1)[0];return(0,m.Ym)(t)}),r=n.data,o=n.error,i=n.mutate;return o?(0,s.jsx)(d,{message:o.message,reload:i}):r?(0,s.jsx)(x,{name:t,children:r}):(0,s.jsx)(l.default,{})}},54477:function(e,t,n){"use strict";n.d(t,{$v:function(){return u},Dc:function(){return l},_e:function(){return c},sF:function(){return i}});var r=n(22977),a=n(6408),s=n(56417),o=n(93891),i=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e){var a;return(0,r._)(this,n),(a=t.call(this,e||"")).name="NeverError",a}return n}((0,s._)(Error)),c=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e){var a;return(0,r._)(this,n),(a=t.call(this,e||"")).name="InfoError",a}return n}((0,s._)(Error)),u=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e){var a;return(0,r._)(this,n),(a=t.call(this,e||"")).name="NotStaffError",a}return n}((0,s._)(Error)),l=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(e,a){var s;return(0,r._)(this,n),(s=t.call(this,e||"")).name="DataError",s.title=a,s}return n}((0,s._)(Error))},43194:function(e,t,n){"use strict";n.d(t,{$3:function(){return l},_s:function(){return c},ei:function(){return f},t3:function(){return u}});var r=n(57437),a=n(2265),s=n(59666),o=n(35239),i=n(54477),c=(0,a.createContext)(void 0);function u(e){var t=e.children,n=(0,s.L)({endpoint:"game/game_info"}),a=n.data,i=n.mutate;return a?(0,r.jsx)(c.Provider,{value:{info:a,reloadInfo:i},children:t}):(0,r.jsx)(o.g,{})}function l(){return(0,a.useContext)(c).info}function f(){var e=l();if("success"!==e.status)throw new i._e;return e}},84987:function(e,t,n){"use strict";n.d(t,{N:function(){return u},Q:function(){return c}});var r=n(24670),a=n(57437),s=n(2265),o=n(43194),i=n(38225),c=(0,s.createContext)(void 0);function u(e){var t,n=e.children,u=(0,o.ei)(),l=(0,r._)((0,s.useState)(!1),2),f=l[0],d=l[1],h=(0,r._)((0,s.useState)(!1),2),g=h[0],v=h[1],m=function(e){localStorage.setItem(e,(0,i.gz)({useLinkForPuzzle:!1,usePuzzleList:!1}))},_=null===(t=u.user)||void 0===t?void 0:t.id,j=_?_+"_setting":"default_setting";return(0,s.useEffect)(function(){var e=localStorage.getItem(j);if(!e){m(j);return}var t=(0,i.vT)(e);if(!t){m(j);return}d(!!t.useLinkForPuzzle),v(!!t.usePuzzleList)},[j]),(0,a.jsx)(c.Provider,{value:{useLinkForPuzzle:f,setUseLinkForPuzzle:function(e){localStorage.setItem(j,(0,i.gz)({useLinkForPuzzle:e,usePuzzleList:g})),d(e),localStorage.getItem(j)},usePuzzleList:g,setUsePuzzleList:function(e){localStorage.setItem(j,(0,i.gz)({useLinkForPuzzle:f,usePuzzleList:e})),v(e),localStorage.getItem(j)}},children:n})}},38266:function(e){e.exports={dialogueContainer:"ChatUI_dialogueContainer__PMoXj",phoneHeader:"ChatUI_phoneHeader__UvdVr",oneInThirdSection:"ChatUI_oneInThirdSection__TOTyr",chatHeader:"ChatUI_chatHeader__ANyu3",chatContainer:"ChatUI_chatContainer__xHUlH",chatBotMessageContainer:"ChatUI_chatBotMessageContainer__I1ppB",chatMessageAvatarContainer:"ChatUI_chatMessageAvatarContainer__D94jM",chatMessageAvatar:"ChatUI_chatMessageAvatar__6vHSl",chatBotMessageText:"ChatUI_chatBotMessageText__YoJbe",chatBotMessageImageContainer:"ChatUI_chatBotMessageImageContainer__OAhRv",chatBotMessageImage:"ChatUI_chatBotMessageImage__GgYZr",chatUserMessageContainer:"ChatUI_chatUserMessageContainer__KwNK0",chatUserMessageText:"ChatUI_chatUserMessageText___X_xD",chatProceedMessageContainer:"ChatUI_chatProceedMessageContainer__0h_PT"}},86799:function(e){e.exports={linkTitle:"LinkTitle_linkTitle__TlAqv"}},89376:function(e){e.exports={template:"Template_template__yfdH_",well:"Template_well__G_s1V"}}}]);