(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4015],{4289:function(e,n,r){Promise.resolve().then(r.bind(r,73017))},73017:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Z}});var t=r(24670),a=r(57437),i=r(59666),s=r(35239),c=r(54477),o=r(88756),l=r.n(o),u=r(20273),d=r(18142),m=r(20020),f=r(35302),_=r(80338),x=r(33071),h=r(82044),j=r(89271),v=r(38225),p=r(2265),g=r(43194),N=r(24033),b=r(40212),C=r(85579),T=r.n(C);function k(e){var n=e.title,r=e.backgroundColor,t=e.children;return(0,a.jsx)("div",{className:T().infoBox,children:(0,a.jsxs)("div",{className:"wrapper",children:[(0,a.jsx)("div",{className:"info-title-wrapper",style:{backgroundColor:r},children:(0,a.jsx)("div",{className:"info-title",children:n})}),(0,a.jsx)("div",{className:"info-content",children:t})]})})}var y=r(37856),E=r(3933);function w(e){var n,r=e.teamInfo,i=e.open,c=e.setOpen;if(r){var o=(0,v.QM)(r.team_name+r.team_info),u=(0,t._)((0,v.tx)(o/360,.75,.9,.6),3),j=u[0],p=u[1],g=u[2],N=(0,a.jsx)(h.default,{placement:"top",title:"队长",children:(0,a.jsx)(b.Z,{})}),C=r.team_members.map(function(e){return(0,a.jsx)(d.Z,{span:12,children:(0,a.jsxs)(_.default,{align:"center",children:[(0,a.jsx)(E.S,{src:e.avatar_url,alt:e.nickname}),(0,a.jsx)(f.Z,{children:e.nickname}),"leader"===e.type&&N]})},"hoverCardTdUser".concat(e.avatar_url))});n=(0,a.jsxs)("div",{className:"teamCardModal",style:{background:"rgb(".concat(j,", ").concat(p,", ").concat(g,")")},children:[(0,a.jsxs)("div",{className:l().cardTeamName,children:[r.team_name,(0,a.jsxs)("div",{className:"team-member-status",children:[(0,a.jsx)(y.o9,{}),r.team_members.length]})]}),(0,a.jsx)("div",{className:"team-description",children:""===r.team_info?(0,a.jsx)("div",{style:{opacity:"0.4"},children:"（队伍什么都没写）"}):r.team_info}),(0,a.jsx)("br",{}),(0,a.jsx)(m.Z,{style:{width:"100%"},gutter:[8,8],children:C}),r.recruiting&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)(k,{title:"招募信息",backgroundColor:"rgb(".concat(j,", ").concat(p,", ").concat(g,")"),children:r.recruiting_contact})]})]})}else n=(0,a.jsx)(s.g,{});return(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{open:i,destroyOnClose:!0,footer:null,maskClosable:!0,onCancel:function(){return c(!1)},className:l().teamCardModalWrapper,centered:!0,getContainer:function(){return document.getElementById("global-container")||document.body},children:n})})}function I(e){var n=e.teamInfo,r=e.onClick,i=(0,v.QM)(n.team_name+n.team_info),s=(0,t._)((0,v.tx)(i/360,.75,.9,.6),3),c=s[0],o=s[1],u=s[2];return(0,a.jsxs)("div",{className:l().teamCard,style:{background:"rgb(".concat(c,", ").concat(o,", ").concat(u,")")},onClick:r,children:[(0,a.jsxs)("div",{className:l().cardTeamName,children:[n.team_name,(0,a.jsxs)("div",{className:"team-member-status",children:[(0,a.jsx)(y.o9,{}),n.team_members.length]})]}),(0,a.jsx)("div",{className:"team-description",children:""===n.team_info?(0,a.jsx)("div",{style:{opacity:"0.4"},children:"（队伍什么都没写）"}):(0,v.aS)(n.team_info,80)}),n.recruiting&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:l().recruitingTagWrapper,children:(0,a.jsx)("div",{className:l().recruitingTag})})})]})}function S(){var e=(0,i.F)({endpoint:"game/get_team_list"}).data,n=(0,t._)((0,p.useState)(null),2),r=n[0],o=n[1],d=(0,t._)((0,p.useState)(!1),2),m=d[0],_=d[1],x=Math.floor(Date.now()/36e5);if(!e)return(0,a.jsx)(s.g,{});if("success"!==e.status)throw new c.Dc(e.message,e.title);var h=(0,v.Sy)(e.team_list.filter(function(e){return e.recruiting}),x),g=(0,v.Sy)(e.team_list.filter(function(e){return!e.recruiting}),x),N=h.map(function(e){return(0,a.jsx)(I,{teamInfo:e,onClick:function(){o(e),_(!0)}},e.team_id)}),b=g.map(function(e){return(0,a.jsx)(I,{teamInfo:e,onClick:function(){o(e),_(!0)}},e.team_id)});return(0,a.jsxs)("div",{className:l().teamListWrapper,children:[(0,a.jsx)(u.Z,{showIcon:!0,message:(0,a.jsx)("b",{children:"注意事项"}),description:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"招募功能是方便玩家组队使用，请确定您有真实的招募需求后再开启。滥用此功能可能会有相应的惩罚。"})})})}),(0,a.jsx)("br",{}),(0,a.jsx)(w,{teamInfo:r,open:m,setOpen:_}),h.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:l().plazaTitles,children:(0,a.jsx)(f.Z.Title,{level:3,children:"招喵启示"})}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:l().teamList,children:N}),(0,a.jsx)("br",{})]}),(0,a.jsx)("div",{className:l().plazaTitles,children:(0,a.jsx)(f.Z.Title,{level:3,children:"探险喵协会"})}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:l().teamList,children:b}),(0,a.jsx)("br",{}),(0,a.jsx)(j.Z.BackTop,{})]})}function Z(){var e=(0,g.ei)();return(0,N.notFound)(),e.user||(0,N.redirect)("/login"),(0,a.jsx)(S,{})}},3933:function(e,n,r){"use strict";r.d(n,{S:function(){return i}});var t=r(57437),a=r(2114);function i(e){var n=e.src,r=e.alt,i=e.profileSize;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.ZP,{src:n,alt:r,size:i,shape:"square"})})}},54477:function(e,n,r){"use strict";r.d(n,{$v:function(){return l},Dc:function(){return u},_e:function(){return o},sF:function(){return c}});var t=r(22977),a=r(6408),i=r(56417),s=r(93891),c=function(e){(0,a._)(r,e);var n=(0,s._)(r);function r(e){var a;return(0,t._)(this,r),(a=n.call(this,e||"")).name="NeverError",a}return r}((0,i._)(Error)),o=function(e){(0,a._)(r,e);var n=(0,s._)(r);function r(e){var a;return(0,t._)(this,r),(a=n.call(this,e||"")).name="InfoError",a}return r}((0,i._)(Error)),l=function(e){(0,a._)(r,e);var n=(0,s._)(r);function r(e){var a;return(0,t._)(this,r),(a=n.call(this,e||"")).name="NotStaffError",a}return r}((0,i._)(Error)),u=function(e){(0,a._)(r,e);var n=(0,s._)(r);function r(e,a){var i;return(0,t._)(this,r),(i=n.call(this,e||"")).name="DataError",i.title=a,i}return r}((0,i._)(Error))},43194:function(e,n,r){"use strict";r.d(n,{$3:function(){return u},_s:function(){return o},ei:function(){return d},t3:function(){return l}});var t=r(57437),a=r(2265),i=r(59666),s=r(35239),c=r(54477),o=(0,a.createContext)(void 0);function l(e){var n=e.children,r=(0,i.L)({endpoint:"game/game_info"}),a=r.data,c=r.mutate;return a?(0,t.jsx)(o.Provider,{value:{info:a,reloadInfo:c},children:n}):(0,t.jsx)(s.g,{})}function u(){return(0,a.useContext)(o).info}function d(){var e=u();if("success"!==e.status)throw new c._e;return e}},88756:function(e){e.exports={teamCard:"page_teamCard__t3Mj1",recruitingTagWrapper:"page_recruitingTagWrapper___n764",recruitingTag:"page_recruitingTag__PSlEi",cardTeamName:"page_cardTeamName__to6Gv",teamCardModalWrapper:"page_teamCardModalWrapper__AGRVl",plazaTitles:"page_plazaTitles__GaU3q",teamList:"page_teamList__j1fin"}},85579:function(e){e.exports={infoBox:"InfoBox_infoBox__NQ1Tv"}}},function(e){e.O(0,[9658,4410,6857,9633,6559,5682,8051,8110,2044,6744,4840,273,4417,3071,2291,5302,3251,1820,1228,7359,2971,7864,1744],function(){return e(e.s=4289)}),_N_E=e.O()}]);