(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8560],{58338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"}},37605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c-3.8 0-7.7.7-11.6 2.3L292 345.9H128c-8.8 0-16 7.4-16 16.6v299c0 9.2 7.2 16.6 16 16.6h101.7c-3.7 11.6-5.7 23.9-5.7 36.4 0 65.9 53.8 119.5 120 119.5 55.4 0 102.1-37.6 115.9-88.4l408.6 164.2c3.9 1.5 7.8 2.3 11.6 2.3 16.9 0 32-14.2 32-33.2V145.2C912 126.2 897 112 880 112zM344 762.3c-26.5 0-48-21.4-48-47.8 0-11.2 3.9-21.9 11-30.4l84.9 34.1c-2 24.6-22.7 44.1-47.9 44.1zm496 58.4L318.8 611.3l-12.9-5.2H184V417.9h121.9l12.9-5.2L840 203.3v617.4z"}}]},name:"notification",theme:"outlined"}},15295:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let o=(r=n(69615))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},69615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(2265)),o=u(n(58338)),a=u(n(51718));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var c=r.forwardRef(function(e,t){var n,u;return r.createElement(a.default,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),u=u={ref:t,icon:o.default},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(u)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(u)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(u,e))}),n))})},84717:function(e,t,n){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return c}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(2265)),o=u(n(37605)),a=u(n(51718));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var c=r.forwardRef(function(e,t){var n,u;return r.createElement(a.default,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),u=u={ref:t,icon:o.default},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(u)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(u)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(u,e))}),n))})},42192:function(e,t,n){Promise.resolve().then(n.bind(n,4848))},4848:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(57437),o=n(59666),a=n(35239),u=n(98024),i=n(43194),c=n(28170),s=n(88500);n(24033);var f=n(2265),l=n(84717),d=n(22195),p=n(36064),m=n(57438),v=n.n(m),g=n(1032);function y(e){var t=e.announcement,n=e.extra,o=e.style;return(0,i.ei)(),(0,r.jsx)("div",{className:v().announcement,id:"announcement-".concat(t.id),style:o,children:(0,r.jsx)(c.Z,{type:"inner",size:"small",bordered:!1,extra:n,title:(0,r.jsxs)(r.Fragment,{children:[t.sorting_index>=0&&(0,r.jsx)(s.Z,{color:"volcano",children:"置顶"}),"通用"!==t.category&&(0,r.jsx)(s.Z,{color:"green",children:t.category}),(0,r.jsxs)("span",{style:{fontSize:"1em",fontWeight:"bold",color:g.blue[6]},children:[(0,r.jsx)(l.Z,{})," "," "," ",t.title]}),(0,r.jsxs)("span",{style:{fontSize:"0.8em",marginLeft:"1em",color:g.gray[2]},children:[" "," 发布于 ",(0,r.jsx)(d.Z,{ts:t.publish_at})]})]}),children:(0,r.jsx)(p.Bk,{name:"announcement",children:t.content})})})}var h=n(7775);function b(){var e=(0,o.F)({endpoint:"game/get_announcements"}),t=e.data,n=e.mutate,i=(0,f.useContext)(h.s),c=i.needReloadAnnouncement,s=i.setNeedReloadAnnouncement;if((0,f.useEffect)(function(){s(!1)},[s]),(0,f.useEffect)(function(){c&&(n().then(),s(!1))},[n,c,s]),!t)return(0,r.jsx)(a.g,{});if("success"!==t.status)return(0,r.jsx)(u.d,{res:t,reload:n});var l=t.data.map(function(e){return(0,r.jsx)(y,{announcement:e,style:{marginBottom:"24px"}},e.id)});return(0,r.jsx)("div",{children:l})}function j(){return(0,r.jsx)("div",{children:(0,r.jsx)(b,{})})}},47915:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var r=n(57437),o=n(88110),a=n.n(o),u=n(22762),i=n(24033);function c(e){var t,n=e.title,o=e.subtitle,c=e.reload;return(0,i.useRouter)(),t=c?[(0,r.jsx)(a(),{type:"primary",onClick:c,children:"重试"},"reload"),(0,r.jsx)(a(),{onClick:function(){return window.location.href="/home"},children:"回到首页"},"home")]:[(0,r.jsx)(a(),{onClick:function(){return window.location.href="/home"},children:"回到首页"},"home")],(0,r.jsx)(u.ZP,{status:"error",title:n,subTitle:o,extra:t,style:{backgroundColor:"#fafafa",borderRadius:"16px"}})}n(2265)},35239:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(57437),o=n(26782);function a(){return(0,r.jsx)("div",{children:(0,r.jsx)(o.default,{active:!0,paragraph:!0})})}},36064:function(e,t,n){"use strict";n.d(t,{Gv:function(){return w},Bk:function(){return b},I$:function(){return O},BZ:function(){return j}});var r=n(35029),o=n(24670),a=n(57437),u=n(88110),i=n.n(u),c=n(52955),s=n(43574),f=n(26782),l=n(20273);function d(e){var t=e.message,n=e.reload;return(0,a.jsx)(l.Z,{type:"error",showIcon:!0,message:t,action:(0,a.jsx)(i(),{onClick:n,children:"重试"})})}var p=n(89376),m=n.n(p),v=n(42333),g=n(14227),y=n(2265),h=n(34040);function b(e){var t=e.name,n=e.children;return(0,a.jsx)("div",{className:"template-".concat(t," ")+m().template,dangerouslySetInnerHTML:{__html:n}})}function j(e){var t=e.name,n=e.children,o=(0,y.useRef)(null);return(0,y.useEffect)(function(){if(o.current){for(;o.current.firstChild;)o.current.removeChild(o.current.firstChild);var e=document.createElement("div");e.className="template-".concat(t," ")+m().template,e.innerHTML=n,Array.from(e.getElementsByClassName("template-antd-image")).forEach(function(e){var t=e.getAttribute("data-src");t&&(0,h.createRoot)(e).render((0,a.jsx)(c.Z,{src:t,alt:"image"}))}),Array.from(e.getElementsByClassName("template-antd-button")).forEach(function(e){var t=e.textContent,n=(0,h.createRoot)(e),r="button";"submit"==e.getAttribute("type")&&(r="submit");var o=e.getAttribute("data-href")||void 0;n.render((0,a.jsx)(i(),{type:"default",size:"large",href:o,htmlType:r,children:t}))}),Array.from(e.getElementsByClassName("template-antd-input")).forEach(function(e){var t=(0,h.createRoot)(e),n=JSON.parse(e.getAttribute("data-attr")||"{}");t.render((0,a.jsx)(s.default,(0,r._)({},n)))}),o.current.appendChild(e);var u=setTimeout(function(){Array.from(e.getElementsByTagName("script")).forEach(function(e){var t=e.innerHTML;window.eval(t)})},200);return function(){return clearTimeout(u)}}},[n,t]),(0,a.jsx)("div",{ref:o})}function O(e){var t=e.name,n=(0,v.ZP)([t],function(e){var t=(0,o._)(e,1)[0];return(0,g.Ym)(t)}),r=n.data,u=n.error,i=n.mutate;return u?(0,a.jsx)(d,{message:u.message,reload:i}):r?(0,a.jsx)(j,{name:t,children:r}):(0,a.jsx)(f.default,{})}function w(e){var t=e.name,n=(0,v.ZP)([t],function(e){var t=(0,o._)(e,1)[0];return(0,g.Ym)(t)}),r=n.data,u=n.error,i=n.mutate;return u?(0,a.jsx)(d,{message:u.message,reload:i}):r?(0,a.jsx)(b,{name:t,children:r}):(0,a.jsx)(f.default,{})}},22195:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(57437),o=n(51909),a=n(53069),u=n(38225),i=(0,a.Z)({prefixAgo:null,prefixFromNow:"",suffixAgo:function(e,t){return t<59500?"刚刚":"前"},suffixFromNow:function(e,t){return 59500>-t?"1 分钟之内":"后"},seconds:"​",minute:"1 分钟",minutes:"%d 分钟",hour:"1 小时",hours:"%d 小时",day:"1 天",days:"%d 天",month:"1 个月",months:"%d 月",year:"1 年",years:"%d 年",wordSeparator:""});function c(e){var t=e.ts,n=e.delta;return(0,r.jsx)(o.Z,{date:(t+(null!=n?n:0))*1e3,formatter:i,title:(0,u.QK)(t)})}},98024:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(57437),o=n(47915);function a(e){var t=e.res,n=e.reload;return n?(0,r.jsx)(o.a,{title:"错误：".concat(t.message),subtitle:(0,r.jsxs)(r.Fragment,{children:["如果你确信这是异常情况，请先尝试重试，如果仍出现问题，请及时联系网站管理员。",(0,r.jsx)("br",{})]}),reload:n}):(0,r.jsx)(o.a,{title:"错误：".concat(t.message),subtitle:(0,r.jsx)(r.Fragment,{children:"如果你确信这是异常情况，请及时联系网站管理员。"})})}},54477:function(e,t,n){"use strict";n.d(t,{$v:function(){return s},Dc:function(){return f},_e:function(){return c},sF:function(){return i}});var r=n(22977),o=n(6408),a=n(56417),u=n(93891),i=function(e){(0,o._)(n,e);var t=(0,u._)(n);function n(e){var o;return(0,r._)(this,n),(o=t.call(this,e||"")).name="NeverError",o}return n}((0,a._)(Error)),c=function(e){(0,o._)(n,e);var t=(0,u._)(n);function n(e){var o;return(0,r._)(this,n),(o=t.call(this,e||"")).name="InfoError",o}return n}((0,a._)(Error)),s=function(e){(0,o._)(n,e);var t=(0,u._)(n);function n(e){var o;return(0,r._)(this,n),(o=t.call(this,e||"")).name="NotStaffError",o}return n}((0,a._)(Error)),f=function(e){(0,o._)(n,e);var t=(0,u._)(n);function n(e,o){var a;return(0,r._)(this,n),(a=t.call(this,e||"")).name="DataError",a.title=o,a}return n}((0,a._)(Error))},43194:function(e,t,n){"use strict";n.d(t,{$3:function(){return f},_s:function(){return c},ei:function(){return l},t3:function(){return s}});var r=n(57437),o=n(2265),a=n(59666),u=n(35239),i=n(54477),c=(0,o.createContext)(void 0);function s(e){var t=e.children,n=(0,a.L)({endpoint:"game/game_info"}),o=n.data,i=n.mutate;return o?(0,r.jsx)(c.Provider,{value:{info:o,reloadInfo:i},children:t}):(0,r.jsx)(u.g,{})}function f(){return(0,o.useContext)(c).info}function l(){var e=f();if("success"!==e.status)throw new i._e;return e}},7775:function(e,t,n){"use strict";n.d(t,{E:function(){return f},s:function(){return s}});var r=n(24670),o=n(57437),a=n(2265),u=n(14227),i=n(38225),c=n(43194),s=(0,a.createContext)(void 0);function f(e){var t=e.children,n=(0,r._)((0,a.useState)(!1),2),f=n[0],l=n[1],d=(0,r._)((0,a.useState)(!1),2),p=d[0],m=d[1],v=(0,r._)((0,a.useState)(!1),2),g=v[0],y=v[1],h=(0,r._)((0,a.useState)(!1),2),b=h[0],j=h[1],O=(0,r._)((0,a.useState)(!1),2),w=O[0],_=O[1],x=(0,r._)((0,a.useState)(!1),2),P=x[0],C=x[1],E=(0,r._)((0,a.useState)(!1),2),N=E[0],S=E[1],R=(0,r._)((0,a.useState)(0),2),A=R[0],k=R[1],M=(0,r._)((0,a.useState)(0),2),Z=M[0],D=M[1],T=(0,r._)((0,a.useState)(0),2),z=T[0],L=T[1],F=(0,r._)((0,a.useState)([[0,0]]),2),H=F[0],B=F[1],I=(0,c.ei)(),W=(0,a.useCallback)(function(){(0,u.HC)({endpoint:"game/team_ap_detail"}).then(function(e){if("error"!==e.status){var t=e.data.team_ap_change,n=e.data.ap_increase_policy;JSON.stringify(n)!==JSON.stringify(H)&&B(n),L(t),k((0,i.Rp)(n,t)),D((0,i.Jy)(n))}})},[H]),V=(0,a.useCallback)(function(){H&&k((0,i.Rp)(H,z))},[z,H]),J=(0,a.useRef)(W);return(0,a.useEffect)(function(){I.user&&I.team&&"staff"!==I.user.group&&J.current()},[I,J]),(0,a.useEffect)(function(){if(I.user&&I.team&&"staff"!==I.user.group){var e=setInterval(V,2e4);return function(){clearInterval(e)}}},[I,V]),(0,o.jsx)(s.Provider,{value:{needReloadAnnouncement:f,setNeedReloadAnnouncement:l,hasNewAnnouncement:b,setHasNewAnnouncement:j,staffUnreadOnly:w,setStaffUnreadOnly:_,staffTimeDesc:P,setStaffTimeDesc:C,hasNewMessage:N,setHasNewMessage:S,needReloadPuzzle:p,setNeedReloadPuzzle:m,needReloadArea:g,setNeedReloadArea:y,currentAp:A,currentApIncrease:Z,updateCurrentAp:W},children:t})}},59666:function(e,t,n){"use strict";n.d(t,{F:function(){return u},L:function(){return a}});var r=n(42333),o=n(14227);function a(e){var t=(0,r.ZP)(e,function(e){return(0,o.HC)(e)},{refreshInterval:18e5});return{data:t.data,mutate:t.mutate}}function u(e){var t=(0,r.ZP)(e,function(e){return(0,o.HC)(e)});return{data:t.data,mutate:t.mutate}}},57438:function(e){e.exports={announcement:"Announcement_announcement__HR2Jc"}},89376:function(e){e.exports={template:"Template_template__yfdH_"}},24033:function(e,t,n){e.exports=n(20290)},23803:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(13428),o=n(21076),a=n(98961),u=n(82554),i=n(16758),c=n(54440),s=n.n(c),f=n(17146),l=n(2265),d=n(89017),p=n(43197),m=d.Z.ESC,v=d.Z.TAB,g=(0,l.forwardRef)(function(e,t){var n=e.overlay,r=e.arrow,o=e.prefixCls,a=(0,l.useMemo)(function(){return"function"==typeof n?n():n},[n]),u=(0,f.sQ)(t,null==a?void 0:a.ref);return l.createElement(l.Fragment,null,r&&l.createElement("div",{className:"".concat(o,"-arrow")}),l.cloneElement(a,{ref:(0,f.Yr)(a)?u:void 0}))}),y={adjustX:1,adjustY:1},h=[0,0],b={topLeft:{points:["bl","tl"],overflow:y,offset:[0,-4],targetOffset:h},top:{points:["bc","tc"],overflow:y,offset:[0,-4],targetOffset:h},topRight:{points:["br","tr"],overflow:y,offset:[0,-4],targetOffset:h},bottomLeft:{points:["tl","bl"],overflow:y,offset:[0,4],targetOffset:h},bottom:{points:["tc","bc"],overflow:y,offset:[0,4],targetOffset:h},bottomRight:{points:["tr","br"],overflow:y,offset:[0,4],targetOffset:h}},j=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"],O=l.forwardRef(function(e,t){var n,c,d,y,h,O,w,_,x,P,C,E,N,S,R=e.arrow,A=void 0!==R&&R,k=e.prefixCls,M=void 0===k?"rc-dropdown":k,Z=e.transitionName,D=e.animation,T=e.align,z=e.placement,L=e.placements,F=e.getPopupContainer,H=e.showAction,B=e.hideAction,I=e.overlayClassName,W=e.overlayStyle,V=e.visible,J=e.trigger,Y=void 0===J?["hover"]:J,Q=e.autoFocus,$=e.overlay,U=e.children,G=e.onVisibleChange,K=(0,u.Z)(e,j),X=l.useState(),q=(0,a.Z)(X,2),ee=q[0],et=q[1],en="visible"in e?V:ee,er=l.useRef(null),eo=l.useRef(null),ea=l.useRef(null);l.useImperativeHandle(t,function(){return er.current});var eu=function(e){et(e),null==G||G(e)};c=(n={visible:en,triggerRef:ea,onVisibleChange:eu,autoFocus:Q,overlayRef:eo}).visible,d=n.triggerRef,y=n.onVisibleChange,h=n.autoFocus,O=n.overlayRef,w=l.useRef(!1),_=function(){if(c){var e,t;null===(e=d.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e),null==y||y(!1)}},x=function(){var e;return null!==(e=O.current)&&void 0!==e&&!!e.focus&&(O.current.focus(),w.current=!0,!0)},P=function(e){switch(e.keyCode){case m:_();break;case v:var t=!1;w.current||(t=x()),t?e.preventDefault():_()}},l.useEffect(function(){return c?(window.addEventListener("keydown",P),h&&(0,p.Z)(x,3),function(){window.removeEventListener("keydown",P),w.current=!1}):function(){w.current=!1}},[c]);var ei=function(){return l.createElement(g,{ref:eo,overlay:$,prefixCls:M,arrow:A})},ec=l.cloneElement(U,{className:s()(null===(S=U.props)||void 0===S?void 0:S.className,en&&(void 0!==(C=e.openClassName)?C:"".concat(M,"-open"))),ref:(0,f.Yr)(U)?(0,f.sQ)(ea,U.ref):void 0}),es=B;return es||-1===Y.indexOf("contextMenu")||(es=["click"]),l.createElement(i.Z,(0,r.Z)({builtinPlacements:void 0===L?b:L},K,{prefixCls:M,ref:er,popupClassName:s()(I,(0,o.Z)({},"".concat(M,"-show-arrow"),A)),popupStyle:W,action:Y,showAction:H,hideAction:es,popupPlacement:void 0===z?"bottomLeft":z,popupAlign:T,popupTransitionName:Z,popupAnimation:D,popupVisible:en,stretch:(E=e.minOverlayWidthMatchTrigger,N=e.alignPoint,"minOverlayWidthMatchTrigger"in e?E:!N)?"minWidth":"",popup:"function"==typeof $?ei:ei(),onPopupVisibleChange:eu,onPopupClick:function(t){var n=e.onOverlayClick;et(!1),n&&n(t)},getPopupContainer:F}),ec)})}},function(e){e.O(0,[9658,4410,6857,9633,6559,5682,8051,8110,3706,6744,4840,9397,273,5708,4417,2955,3570,8170,1849,1228,2971,7864,1744],function(){return e(e.s=42192)}),_N_E=e.O()}]);