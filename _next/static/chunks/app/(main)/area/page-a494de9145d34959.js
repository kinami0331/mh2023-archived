(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7639],{36168:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPropValue=void 0,t.getRenderPropValue=e=>e?"function"==typeof e?e():e:null},77660:function(e,t,n){"use strict";var a=n(36199).default,r=n(26314).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getOverlay=t.default=t.RawPurePanel=void 0;var o=r(n(54440)),i=n(36680),s=a(n(2265)),l=n(9273),u=n(36168),c=r(n(86435)),d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};let p=(e,t,n)=>{if(t||n)return s.createElement(s.Fragment,null,t&&s.createElement("div",{className:`${e}-title`},(0,u.getRenderPropValue)(t)),s.createElement("div",{className:`${e}-inner-content`},(0,u.getRenderPropValue)(n)))};t.getOverlay=p;let m=e=>{let{hashId:t,prefixCls:n,className:a,style:r,placement:l="top",title:u,content:c,children:d}=e;return s.createElement("div",{className:(0,o.default)(t,n,`${n}-pure`,`${n}-placement-${l}`,a),style:r},s.createElement("div",{className:`${n}-arrow`}),s.createElement(i.Popup,Object.assign({},e,{className:t,prefixCls:n}),d||p(n,u,c)))};t.RawPurePanel=m,t.default=e=>{let{prefixCls:t,className:n}=e,a=d(e,["prefixCls","className"]),{getPrefixCls:r}=s.useContext(l.ConfigContext),i=r("popover",t),[u,p,f]=(0,c.default)(i);return u(s.createElement(m,Object.assign({},a,{prefixCls:i,hashId:p,className:(0,o.default)(n,f)})))}},76431:function(e,t,n){"use strict";var a=n(26314).default,r=n(36199).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(2265)),i=a(n(54440)),s=n(36168),l=n(88658),u=n(9273),c=a(n(82044)),d=a(n(77660)),p=a(n(86435)),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};let f=e=>{let{title:t,content:n,prefixCls:a}=e;return o.createElement(o.Fragment,null,t&&o.createElement("div",{className:`${a}-title`},(0,s.getRenderPropValue)(t)),o.createElement("div",{className:`${a}-inner-content`},(0,s.getRenderPropValue)(n)))},g=o.forwardRef((e,t)=>{let{prefixCls:n,title:a,content:r,overlayClassName:s,placement:d="top",trigger:g="hover",mouseEnterDelay:x=.1,mouseLeaveDelay:h=.1,overlayStyle:y={}}=e,v=m(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:_}=o.useContext(u.ConfigContext),j=_("popover",n),[b,z,w]=(0,p.default)(j),k=_(),C=(0,i.default)(s,z,w);return b(o.createElement(c.default,Object.assign({placement:d,trigger:g,mouseEnterDelay:x,mouseLeaveDelay:h,overlayStyle:y},v,{prefixCls:j,overlayClassName:C,ref:t,overlay:a||r?o.createElement(f,{prefixCls:j,title:a,content:r}):null,transitionName:(0,l.getTransitionName)(k,"zoom-big",v.transitionName),"data-popover-inject":!0})))});g._InternalPanelDoNotUseOrYouWillBeFired=d.default,t.default=g},86435:function(e,t,n){"use strict";var a=n(36199).default;Object.defineProperty(t,"__esModule",{value:!0}),t.prepareComponentToken=t.default=void 0;var r=n(5101),o=n(46420),i=a(n(17481)),s=n(18710),l=n(58682);let u=e=>{let{componentCls:t,popoverColor:n,titleMinWidth:a,fontWeightStrong:o,innerPadding:s,boxShadowSecondary:l,colorTextHeading:u,borderRadiusLG:c,zIndexPopup:d,titleMarginBottom:p,colorBgElevated:m,popoverBg:f,titleBorderBottom:g,innerContentPadding:x,titlePadding:h}=e;return[{[t]:Object.assign(Object.assign({},(0,r.resetComponent)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":m,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:f,backgroundClip:"padding-box",borderRadius:c,boxShadow:l,padding:s},[`${t}-title`]:{minWidth:a,marginBottom:p,color:u,fontWeight:o,borderBottom:g,padding:h},[`${t}-inner-content`]:{color:n,padding:x}})},(0,i.default)(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},c=e=>{let{componentCls:t}=e;return{[t]:s.PresetColors.map(n=>{let a=e[`${n}6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":a,[`${t}-inner`]:{backgroundColor:a},[`${t}-arrow`]:{background:"transparent"}}}})}},d=e=>{let{lineWidth:t,controlHeight:n,fontHeight:a,padding:r,wireframe:o,zIndexPopupBase:s,borderRadiusLG:u,marginXS:c,lineType:d,colorSplit:p,paddingSM:m}=e,f=n-a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},(0,l.getArrowToken)(e)),(0,i.getArrowOffsetToken)({contentRadius:u,limitVerticalRadius:!0})),{innerPadding:o?0:12,titleMarginBottom:o?0:c,titlePadding:o?`${f/2}px ${r}px ${f/2-t}px`:0,titleBorderBottom:o?`${t}px ${d} ${p}`:"none",innerContentPadding:o?`${m}px ${r}px`:0})};t.prepareComponentToken=d,t.default=(0,s.genStyleHooks)("Popover",e=>{let{colorBgElevated:t,colorText:n}=e,a=(0,s.mergeToken)(e,{popoverBg:t,popoverColor:n});return[u(a),c(a),(0,o.initZoomMotion)(a,"zoom-big")]},d,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]})},40482:function(e,t,n){Promise.resolve().then(n.bind(n,98765))},62291:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var a=n(57437),r=n(38225),o=n(54637),i=n(20161),s=n.n(i);function l(e){for(var t=e.totalNum,n=e.greenNum,i=e.redNum,l=[],u=0;u<n;u++)l.push("#64c43b");for(var c=0;c<i;c++)l.push("#ff8080");var d=0;i+n>0&&(d=(i+n-1e-4)/t*100);var p=Math.round(3*(0,r.j7)())/(0,r.j7)(),m=Math.round(4*(0,r.j7)())/(0,r.j7)();return(0,a.jsx)(o.Z,{className:s().difficultyStatus,strokeColor:l,percent:d,steps:t,size:"small",trailColor:"#d2d2d2",format:function(){return null},style:{"--aligned-width":m+"px","--aligned-margin":p+"px"}})}},147:function(e,t,n){"use strict";n.d(t,{l:function(){return h},m:function(){return y}});var a=n(35029),r=n(57437),o=n(2265),i=n(63976),s=n.n(i),l=n(67930),u=n(90280),c=n(15785),d=n(95536);function p(e){var t=e.status;return"untouched"===t?(0,r.jsx)(l.Z,{style:{opacity:.3}}):"partial"===t?(0,r.jsx)(d.default,{style:{opacity:.3}}):"passed"===t?(0,r.jsx)(u.Z,{twoToneColor:"#1ab500"}):"found"===t?(0,r.jsx)(c.Z,{style:{opacity:.3}}):"never"}var m=n(13479),f=n(82044),g=n(62291),x=n(31731);function h(e){var t=e.mapData;return(0,r.jsx)("div",{className:s().mapPuzzleList,children:0===t.puzzle_groups.length?(0,r.jsx)(m.default,{image:m.default.PRESENTED_IMAGE_SIMPLE,description:"暂无题目"}):t.puzzle_groups.map(function(e,t){return(0,r.jsx)(y,{puzzleList:e.puzzles,rowStyle:{backgroundColor:"#f8f8f8"}},t)})})}function y(e){var t=e.puzzleList,n=e.currentKey,i=e.rowStyle;return(0,r.jsxs)("div",{className:s().puzzleList,children:[t.map(function(e){var t=0==e.puzzle_key.length,s=n===e.puzzle_key,l=(0,r.jsxs)("div",{className:"puzzle-title",children:[(0,r.jsx)(p,{status:e.status})," ",e.title]});return t&&(l=(0,r.jsx)(f.default,{title:"这道题暂时无法访问，请先挑战其他题目。",placement:"left",children:l})),(0,r.jsx)(o.Fragment,{children:(0,r.jsxs)(x.g,{href:"/puzzle?key=".concat(e.puzzle_key),targetType:"puzzle",className:(t?"puzzle-row-disabled":"puzzle-row")+(s?" puzzle-row-select":""),style:(0,a._)({display:"flex"},i),disabled:t||s,children:[l,(0,r.jsx)(f.default,{title:e.total_attempted+" 支队伍尝试，其中 "+e.total_passed+" 支队伍通过",placement:"right",children:(0,r.jsx)("div",{className:"portal-puzzle-col-progress",children:(0,r.jsx)(g.R,{totalNum:e.difficulty_status.total_num,greenNum:e.difficulty_status.green_num,redNum:e.difficulty_status.red_num})})})]})},""!==e.puzzle_key?e.puzzle_key:e.title)}),0===t.length&&(0,r.jsx)(m.default,{image:m.default.PRESENTED_IMAGE_SIMPLE,description:"暂无题目"})]})}},98765:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var a=n(57437),r=n(24033),o=n(24670),i=n(63182),s=n.n(i),l=n(92148),u=n(2265),c=n(20273),d=n(43574),p=n(33116),m=n(40212);function f(){var e=(0,o._)((0,u.useState)(""),2),t=e[0],n=e[1],r=(0,o._)((0,u.useState)(!1),2),i=r[0],f=r[1],g=(0,u.useMemo)(function(){return{content:t}},[t]),x=(0,a.jsx)(a.Fragment,{children:"您可以在此提交预告片谜题答案。预告片谜题不计算在正式比赛进度中，也不会产生提交历史，仅验证答案用，请放心提交。"});return(0,a.jsxs)("div",{className:s().miaoTownContainer+" slim-container",children:[(0,a.jsx)("br",{}),(0,a.jsx)(c.Z,{type:"info",message:(0,a.jsxs)(a.Fragment,{children:["预告片《喵镇奇谈》已经发布，您可以在此页面验证答案。答案每分钟最多验证一次喵。",(0,a.jsx)("br",{}),"虽然预告片不计算在正式比赛中也不限制讨论，但是为了他人的游戏体验，在公开场合讨论时还请注意分寸喵。",(0,a.jsx)("br",{})]})}),(0,a.jsx)("br",{}),(0,a.jsx)(c.Z,{showIcon:!0,type:"warning",message:(0,a.jsxs)(a.Fragment,{children:["注意：预告片视频为发布在 bilibili 的互动视频，网页中内嵌的视频并非完整内容。请",(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.bilibili.com/video/BV1Bu411M7sU/",children:"点击这里"}),"前往原视频页面游玩。"]})}),(0,a.jsx)("div",{className:"puzzle-iframe-container",children:(0,a.jsx)("div",{className:"puzzle-iframe-wrapper",children:(0,a.jsx)("iframe",{src:"//player.bilibili.com/player.html?aid=534423416&bvid=BV1Bu411M7sU&cid=1292406035&p=1",style:{border:"0"},allowFullScreen:!0})})}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.default.Search,{size:"large",addonBefore:"提交答案：",placeholder:"... ...",enterButton:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{})," 提交"]}),onChange:function(e){n(e.target.value)},value:t,onSearch:function(e){if(!e){p.ZP.error({content:"提交内容不能为空！",key:"DO_SUBMIT",duration:3}).then();return}f(!0)}}),(0,a.jsx)(l.Q,{wishParam:{endpoint:"game/verify_trailer_answer",payload:g},open:i,setOpen:f,confirmContent:x,onFinish:function(){n("")}})]})]})}var g=n(59666),x=n(35239),h=n(147),y=n(89271),v=n(33071),_=n(76431),j=n(31731),b=n(37856),z=n(62291),w=n(66585),k=n.n(w);function C(e){var t=e.puzzle,n=e.zoom;if(!t.location)return(0,a.jsx)(a.Fragment,{});var r=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:k().popoverWrapper,children:[(0,a.jsx)("div",{children:t.title}),(0,a.jsx)(z.R,{totalNum:t.difficulty_status.total_num,greenNum:t.difficulty_status.green_num,redNum:t.difficulty_status.red_num})]}),(0,a.jsx)("div",{children:t.total_attempted+" 支队伍尝试，其中 "+t.total_passed+" 支队伍通过"}),"found"===t.status&&(0,a.jsx)("div",{className:k().disabledNotice,children:t.found_msg})]}),i=(0,o._)(t.location,4),s=i[0],l=i[1],c=i[2],d=i[3];return(0,a.jsx)(u.Fragment,{children:(0,a.jsx)(j.g,{href:"/puzzle?key=".concat(t.puzzle_key),targetType:"puzzle",disabled:"found"===t.status,children:(0,a.jsx)(_.default,{placement:"top",title:r,style:{color:"black"},children:(0,a.jsx)("div",{className:k().puzzleLink,style:{position:"absolute",width:c*n,height:d*n,top:l*n,left:s*n,backgroundImage:t.image&&"url(".concat(t.image,")")||"",backgroundSize:"contain",backgroundRepeat:"no-repeat"}})})})})}function S(e){var t=e.mapData,n=(0,o._)((0,u.useState)(window.innerWidth),2),r=n[0],i=n[1],s=(0,o._)((0,u.useState)(window.innerHeight),2),l=s[0],c=s[1],d=(0,o._)((0,u.useState)(!1),2),p=d[0],m=d[1],f=(0,o._)((0,u.useState)(0),2),g=f[0],x=f[1],h=(0,o._)((0,u.useState)(0),2),y=h[0],v=h[1],_=(0,o._)((0,u.useState)((window.innerWidth-1800)/4),2),j=_[0],b=_[1],z=(0,o._)((0,u.useState)(window.innerHeight-1485),2),w=z[0],S=z[1],N=function(e,t){var n=e-g,a=t-y;r>=1800?j+n>r-1800?n=r-1800-j:j+n<0&&(n=0-j):j+n>0?n=0-j:j+n<r-1800&&(n=r-1800-j),l>=1485?w+a>l-1485?a=l-1485-w:w+a<0&&(a=0-w):w+a>0?a=0-w:w+a<l-1485&&(a=l-1485-w),x(function(e){return e+n}),v(function(e){return e+a}),b(function(e){return e+n}),S(function(e){return e+a})};(0,u.useEffect)(function(){var e=function(){i(window.innerWidth),c(window.innerHeight),b((window.innerWidth-1800)/2)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[1800]);var M=(0,u.useRef)(null);return(0,a.jsx)("div",{className:k().mapContainer,children:(0,a.jsx)("div",{ref:M,className:k().mapImage,style:{position:"absolute",cursor:p?"grabbing":"grab",left:"".concat(j,"px"),top:"".concat(w,"px"),width:"".concat(1800,"px"),height:"".concat(1485,"px"),backgroundImage:"url(".concat(t.map_image,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",touchAction:"none"},onMouseDown:function(e){e.preventDefault(),m(!0),x(e.clientX),v(e.clientY)},onMouseLeave:function(){m(!1)},onMouseUp:function(){m(!1)},onMouseMove:function(e){p&&(e.preventDefault(),N(e.clientX,e.clientY))},onTouchStart:function(e){m(!0),x(e.touches[0].clientX),v(e.touches[0].clientY)},onTouchEnd:function(e){m(!1)},onTouchMove:function(e){p&&N(e.touches[0].clientX,e.touches[0].clientY)},children:t.puzzle_groups.map(function(e){return e.puzzles}).flat().map(function(e){return(0,a.jsx)(C,{puzzle:e,zoom:.6},"map-puzzle-link-".concat(""!==e.puzzle_key?e.puzzle_key:e.title))})})})}function N(e){var t=e.mapData;(0,u.useEffect)(function(){var e=document.body.style.backgroundColor,n=document.body.style.backgroundBlendMode,a=document.body.style.backgroundAttachment,r=document.body.style.animation,o=document.body.style.backgroundImage,i=document.body.style.padding;return document.body.style.backgroundColor="rgba(0, 0, 0, 0.05)",document.body.style.backgroundBlendMode="multiply",document.body.style.backgroundAttachment="fixed",document.body.style.animation="scrollBackground 90s linear infinite",document.body.style.backgroundImage="url(".concat(t.bg_image,")"),document.body.style.padding="0px",function(){document.body.style.backgroundColor=e,document.body.style.backgroundBlendMode=n,document.body.style.backgroundAttachment=a,document.body.style.animation=r,document.body.style.backgroundImage=o,document.body.style.padding=i}},[t]);var n=(0,o._)((0,u.useState)(!1),2),r=n[0],i=n[1];return(0,a.jsxs)("div",{className:k().container,children:[(0,a.jsx)(S,{mapData:t}),(0,a.jsx)(y.Z,{shape:"circle",type:"primary",className:k().mapFloatButton,icon:(0,a.jsx)(b.YC,{style:{color:"#fff"}}),onClick:function(){return i(!0)},tooltip:(0,a.jsx)("div",{children:"藏宝图"})}),(0,a.jsxs)(v.Z,{open:r,onCancel:function(){return i(!1)},footer:null,className:k().puzzleListContainer,children:[(0,a.jsx)("div",{className:"list-title",children:"藏宝图"}),(0,a.jsx)(h.l,{mapData:t})]})]})}var M=n(98491),P=n(32627),O=n(43194),E=n(85847),R=n(36064),F=n(44643);function B(e){var t=e.template,n=e.chat,r=(0,E.t)({chatMessages:n.scene_script}),o=r.finish,i=r.chatComponent;(0,O.ei)();var s=(0,a.jsx)(a.Fragment,{});return o&&(s=(0,a.jsx)(c.Z,{type:"info",showIcon:!0,message:"已经进入归档模式了，这里没有按钮了喵。"})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"slim-container",children:[(0,a.jsx)(P.M,{icon:(0,a.jsx)(M.Z,{}),title:"返回",url:"/home"}),(0,a.jsx)("br",{}),(0,a.jsx)(R.Bk,{name:"scene",children:t.template}),(0,a.jsx)("br",{}),i,(0,a.jsx)("br",{}),s,(0,a.jsx)(y.Z.BackTop,{})]}),(0,a.jsx)("br",{}),(0,a.jsx)(F.$,{})]})}var I=n(7775);function T(e){var t=e.areaName,n=(0,g.F)({endpoint:"game/get_area_detail",payload:{area_name:t}}),o=n.data,i=n.mutate,s=(0,u.useContext)(I.s),l=s.needReloadArea,c=s.setNeedReloadArea;return((0,u.useEffect)(function(){l&&i().then(function(){return c(!1)})},[i,l,c]),o)?("error"===o.status&&(0,r.notFound)(),"map"===o.data.type)?(0,a.jsx)(N,{mapData:o.data}):"intro"===o.data.type?(0,a.jsx)(B,{template:o.data.template,chat:o.data.chat}):((0,r.notFound)(),(0,a.jsx)(a.Fragment,{})):(0,a.jsx)(x.g,{})}function $(){var e,t=null!==(e=(0,r.useSearchParams)().get("dst"))&&void 0!==e?e:"";return(""===t&&(0,r.notFound)(),"miao-town"===t)?(0,a.jsx)(f,{}):(0,a.jsx)(T,{areaName:t})}},44643:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var a=n(35029),r=n(57437);function o(){return(0,r.jsx)("div",{className:"footer-content",children:(0,r.jsxs)("p",{children:["Project ",(0,r.jsx)("b",{children:"MiaoHunt Website"})," by Miao Team",(0,r.jsx)("br",{}),"build version ","2401171140",(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noreferrer",style:{color:"inherit"},children:"津ICP备2022000942号-3"}),"\xa0\xa0\xa0",(0,r.jsx)("img",{alt:"Gong An Bei An",src:"/images/beian.png",style:{width:"16px",height:"16px",marginTop:"-3px",verticalAlign:"middle"}}),(0,r.jsx)("a",{href:"https://beian.mps.gov.cn/#/query/webSearch?code=12010402001977",target:"_blank",rel:"noreferrer",style:{color:"inherit"},children:"津公网安备 12010402001977号"}),(0,r.jsx)("br",{}),"Miaomiaomiao Studio \xa9 2023 - All Rights Reserved.",(0,r.jsx)("br",{}),(0,r.jsx)("a",{className:"link-nostyle",href:"mailto:miaohunt@miaomiaomiao.team",children:"miaohunt@miaomiaomiao.team"})]})})}function i(e){var t=e.style;return(0,r.jsx)("div",{style:(0,a._)({fontSize:"0.8em",padding:"2rem 0 1rem",textAlign:"center",opacity:"0.6"},t),children:(0,r.jsx)(o,{})})}n(2265)},92148:function(e,t,n){"use strict";n.d(t,{Q:function(){return h}});var a=n(24670),r=n(57437),o=n(2265),i=n(67912),s=n(88110),l=n.n(s),u=n(33071),c=n(26782),d=n(51512),p=n(57614),m=n(38343),f=n(58862),g=n(32382),x=n.n(g);function h(e){var t,n=e.wishParam,s=e.open,g=e.setOpen,h=e.confirmTitle,y=e.confirmContent,v=e.onError,_=e.onErrorContentRender,j=e.onErrorTitleRender,b=e.onSuccess,z=e.onSuccessContentRender,w=e.onSuccessTitleRender,k=e.onInfo,C=e.onInfoContentRender,S=e.onInfoTitleRender,N=e.onFinish,M=(0,r.jsx)(f.Z,{style:{color:"#faad14"}}),P=(0,r.jsx)(d.default,{style:{color:"#52c41a"}}),O=(0,r.jsx)(p.default,{style:{color:"#ff4d4f"}}),E=(0,r.jsx)(m.default,{style:{color:"#1890ff"}}),R=(0,a._)((0,o.useState)("confirm"),2),F=R[0],B=R[1],I=(0,a._)((0,o.useState)(!1),2),T=I[0],$=I[1],A=(0,a._)((0,o.useState)(void 0),2),W=A[0],L=A[1];(0,o.useEffect)(function(){s||(B("confirm"),$(!1),L(void 0))},[s]);var D="加载中...";"confirm"===F?(D=T?"提交中...":h||"提交确认",D=(0,r.jsxs)(r.Fragment,{children:[M,"\xa0\xa0",D]})):"success"===F&&W?(D=w?w(W):W.title?W.title:"成功",D=(0,r.jsxs)(r.Fragment,{children:[P,"\xa0\xa0",D]})):"error"===F&&W?(D=j?j(W):W.title?W.title:"出错",D=(0,r.jsxs)(r.Fragment,{children:[O,"\xa0\xa0",D]})):"info"===F&&W&&(D=S?S(W):W.title?W.title:"获得信息",D=(0,r.jsxs)(r.Fragment,{children:[E,"\xa0\xa0",D]}));var Z=(0,r.jsx)(c.default,{});return"confirm"===F?(Z=y||"确认要提交吗？",Z=(0,r.jsx)("div",{style:{whiteSpace:"pre-line"},children:Z})):"success"===F&&W?Z=z?z(W):W.message?(0,r.jsx)("div",{style:{whiteSpace:"pre-line"},children:W.message}):"成功":"error"===F&&W?Z=_?_(W):W.message?(0,r.jsx)("div",{style:{whiteSpace:"pre-line"},children:W.message}):"出错！":"info"===F&&W&&(Z=C?C(W):W.message?(0,r.jsx)("div",{style:{whiteSpace:"pre-line"},children:W.message}):"获得未知信息，或许出错了。"),t="confirm"===F?[(0,r.jsx)(l(),{onClick:function(){g(!1)},disabled:T,children:"取消"},"cancel"),(0,r.jsx)(l(),{type:"primary",loading:T,onClick:function(){$(!0),(0,i.HC)(n).then(function(e){e.status?B(e.status):B("error"),L(e)})},children:"确认"},"submit")]:[(0,r.jsx)(l(),{type:"primary",onClick:function(){g(!1),"success"===F&&b&&W&&b(W),"error"===F&&v&&W&&v(W),"info"===F&&k&&W&&k(W),N&&W&&N(W)},children:"确认"},"cancel")],(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,{open:s,title:(0,r.jsx)(r.Fragment,{children:D}),footer:t,destroyOnClose:!0,closable:!1,wrapClassName:x().wishConfirmModal,children:Z})})}},7775:function(e,t,n){"use strict";n.d(t,{E:function(){return c},s:function(){return u}});var a=n(24670),r=n(57437),o=n(2265),i=n(67912),s=n(38225),l=n(43194),u=(0,o.createContext)(void 0);function c(e){var t=e.children,n=(0,a._)((0,o.useState)(!1),2),c=n[0],d=n[1],p=(0,a._)((0,o.useState)(!1),2),m=p[0],f=p[1],g=(0,a._)((0,o.useState)(!1),2),x=g[0],h=g[1],y=(0,a._)((0,o.useState)(!1),2),v=y[0],_=y[1],j=(0,a._)((0,o.useState)(!1),2),b=j[0],z=j[1],w=(0,a._)((0,o.useState)(!1),2),k=w[0],C=w[1],S=(0,a._)((0,o.useState)(!1),2),N=S[0],M=S[1],P=(0,a._)((0,o.useState)(0),2),O=P[0],E=P[1],R=(0,a._)((0,o.useState)(0),2),F=R[0],B=R[1],I=(0,a._)((0,o.useState)(0),2),T=I[0],$=I[1],A=(0,a._)((0,o.useState)([[0,0]]),2),W=A[0],L=A[1],D=(0,l.ei)(),Z=(0,o.useCallback)(function(){(0,i.HC)({endpoint:"game/team_ap_detail"}).then(function(e){if("error"!==e.status){var t=e.data.team_ap_change,n=e.data.ap_increase_policy;JSON.stringify(n)!==JSON.stringify(W)&&L(n),$(t),E((0,s.Rp)(n,t)),B((0,s.Jy)(n))}})},[W]),G=(0,o.useCallback)(function(){W&&E((0,s.Rp)(W,T))},[T,W]),H=(0,o.useRef)(Z);return(0,o.useEffect)(function(){D.user&&D.team&&"staff"!==D.user.group&&H.current()},[D,H]),(0,o.useEffect)(function(){if(D.user&&D.team&&"staff"!==D.user.group){var e=setInterval(G,2e4);return function(){clearInterval(e)}}},[D,G]),(0,r.jsx)(u.Provider,{value:{needReloadAnnouncement:c,setNeedReloadAnnouncement:d,hasNewAnnouncement:v,setHasNewAnnouncement:_,staffUnreadOnly:b,setStaffUnreadOnly:z,staffTimeDesc:k,setStaffTimeDesc:C,hasNewMessage:N,setHasNewMessage:M,needReloadPuzzle:m,setNeedReloadPuzzle:f,needReloadArea:x,setNeedReloadArea:h,currentAp:O,currentApIncrease:F,updateCurrentAp:Z},children:t})}},66585:function(e){e.exports={container:"GameMap_container__kHF4F",mapContainer:"GameMap_mapContainer__qaplR",mapImage:"GameMap_mapImage__7AeVW",puzzleListContainer:"GameMap_puzzleListContainer__liHGg",mapBodyWrapper:"GameMap_mapBodyWrapper__h3igW",puzzleLink:"GameMap_puzzleLink__dWSG1",disabledNotice:"GameMap_disabledNotice__S7WR7",popoverWrapper:"GameMap_popoverWrapper__Bt0zD",mapFloatButton:"GameMap_mapFloatButton__l6_X6"}},63182:function(e){e.exports={miaoTownContainer:"MiaoTown_miaoTownContainer__8_PBx"}},20161:function(e){e.exports={difficultyStatus:"DifficultyStatus_difficultyStatus__znlYI"}},63976:function(e){e.exports={mapPuzzleList:"PuzzleList_mapPuzzleList__hR6oN",puzzleList:"PuzzleList_puzzleList__oblAs"}},32382:function(e){e.exports={wishConfirmModal:"WishComfirmModal_wishConfirmModal__H4UBF"}}},function(e){e.O(0,[5583,4410,6857,6126,5193,6559,5682,8110,8051,2044,6744,4840,9397,273,1396,3116,4417,2955,3071,2291,8084,2169,7359,8809,2971,7864,1744],function(){return e(e.s=40482)}),_N_E=e.O()}]);